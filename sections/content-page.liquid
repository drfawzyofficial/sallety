{%- comment -%}
  Content Page Section
  Reusable section for Terms, Privacy, Refund, Contact-Info, Shipping pages
  Premium design following Sallety Theme Patterns
  RTL layout with blocks for dynamic content and color_scheme support
{%- endcomment -%}

{%- liquid
  # Color Scheme
  assign color_scheme = section.settings.color_scheme | default: 'scheme-1'
  
  # Get colors from the scheme
  assign scheme_settings = settings.color_schemes[color_scheme]
  assign bg_color = scheme_settings.settings.background | default: '#ffffff'
  assign text_color = scheme_settings.settings.text | default: '#374151'
  assign accent_color = scheme_settings.settings.accent | default: '#1a2744'
  
  # Typography Settings
  assign heading_size_desktop = section.settings.heading_size_desktop | default: 36
  assign heading_size_tablet = section.settings.heading_size_tablet | default: 28
  assign heading_size_mobile = section.settings.heading_size_mobile | default: 24
  assign subheading_size = section.settings.subheading_size | default: 18
  assign body_size = section.settings.body_size | default: 16
  assign heading_weight = section.settings.heading_weight | default: '700'
  assign block_heading_size = section.settings.block_heading_size | default: 22
  
  # Layout Settings
  assign card_radius = section.settings.card_radius | default: 16
  assign padding_top = section.settings.padding_top | default: 60
  assign padding_bottom = section.settings.padding_bottom | default: 60
  assign content_width = section.settings.content_width | default: '800'
-%}

{%- capture section_dir -%}{%- render 'section-dir' -%}{%- endcapture -%}
<section 
  class="content-page color-{{ color_scheme }} py-12 lg:py-16"
  dir="{{ section_dir }}"
  style="
    --content-bg: {{ bg_color }};
    --content-text: {{ text_color }};
    --content-accent: {{ accent_color }};
    --content-heading-desktop: {{ heading_size_desktop }}px;
    --content-heading-tablet: {{ heading_size_tablet }}px;
    --content-heading-mobile: {{ heading_size_mobile }}px;
    --content-subheading-size: {{ subheading_size }}px;
    --content-body-size: {{ body_size }}px;
    --content-heading-weight: {{ heading_weight }};
    --content-block-heading: {{ block_heading_size }}px;
    --content-card-radius: {{ card_radius }}px;
    padding-top: {{ padding_top }}px;
    padding-bottom: {{ padding_bottom }}px;
    background-color: var(--content-bg);
    font-family: var(--font-body-family);
  "
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8" style="max-width: {{ content_width }}px;">
    <!-- Header -->
    {%- if section.settings.heading != blank or section.settings.subheading != blank -%}
      <div class="content-header text-center mb-10 lg:mb-14">
        {%- if section.settings.heading != blank -%}
          <h1 class="content-heading mb-4" style="color: var(--content-accent); font-weight: var(--content-heading-weight);">
            {{ section.settings.heading }}
          </h1>
        {%- endif -%}
        
        {%- if section.settings.subheading != blank -%}
          <p class="content-subheading max-w-2xl mx-auto" style="color: var(--content-text); font-size: var(--content-subheading-size); opacity: 0.8;">
            {{ section.settings.subheading }}
          </p>
        {%- endif -%}
        
        {%- if section.settings.show_last_updated -%}
          <p class="content-date mt-4 text-sm" style="color: var(--content-text); opacity: 0.6;">
            آخر تحديث: {{ 'now' | date: "%d/%m/%Y" }}
          </p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <!-- Content Blocks -->
    {%- if section.blocks.size > 0 -%}
      <div class="content-blocks space-y-8">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'content_block' -%}
              <div class="content-block p-6 lg:p-8" style="background: color-mix(in srgb, var(--content-text) 3%, var(--content-bg)); border-radius: var(--content-card-radius);" {{ block.shopify_attributes }}>
                {%- if block.settings.block_heading != blank -%}
                  <h2 class="content-block-heading mb-4 flex items-center gap-3" style="color: var(--content-accent);">
                    {%- if block.settings.show_icon -%}
                      <span class="content-block-icon w-10 h-10 flex items-center justify-center rounded-lg flex-shrink-0" style="background: color-mix(in srgb, var(--content-accent) 10%, transparent);">
                        {%- case block.settings.icon_type -%}
                          {%- when 'document' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                              <polyline points="14 2 14 8 20 8"/>
                              <line x1="16" y1="13" x2="8" y2="13"/>
                              <line x1="16" y1="17" x2="8" y2="17"/>
                              <polyline points="10 9 9 9 8 9"/>
                            </svg>
                          {%- when 'shield' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            </svg>
                          {%- when 'refresh' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <polyline points="23 4 23 10 17 10"/>
                              <polyline points="1 20 1 14 7 14"/>
                              <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                            </svg>
                          {%- when 'truck' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <rect x="1" y="3" width="15" height="13"/>
                              <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
                              <circle cx="5.5" cy="18.5" r="2.5"/>
                              <circle cx="18.5" cy="18.5" r="2.5"/>
                            </svg>
                          {%- when 'phone' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            </svg>
                          {%- when 'info' -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <circle cx="12" cy="12" r="10"/>
                              <line x1="12" y1="16" x2="12" y2="12"/>
                              <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                          {%- else -%}
                            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                              <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        {%- endcase -%}
                      </span>
                    {%- endif -%}
                    {{ block.settings.block_heading }}
                  </h2>
                {%- endif -%}
                
                {%- if block.settings.block_content != blank -%}
                  <div class="content-block-text prose prose-lg" style="color: var(--content-text); font-size: var(--content-body-size); line-height: 1.8;">
                    {{ block.settings.block_content }}
                  </div>
                {%- endif -%}
              </div>

            {%- when 'divider' -%}
              <hr class="content-divider my-8" style="border: none; border-top: 1px solid color-mix(in srgb, var(--content-text) 15%, transparent);" {{ block.shopify_attributes }}>

            {%- when 'contact_info' -%}
              <div class="content-contact p-6 lg:p-8" style="background: color-mix(in srgb, var(--content-accent) 5%, transparent); border-radius: var(--content-card-radius); border: 1px solid color-mix(in srgb, var(--content-accent) 15%, transparent);" {{ block.shopify_attributes }}>
                {%- if block.settings.contact_heading != blank -%}
                  <h2 class="content-contact-heading mb-6 text-xl font-semibold" style="color: var(--content-accent);">
                    {{ block.settings.contact_heading }}
                  </h2>
                {%- endif -%}
                
                <div class="content-contact-list space-y-4">
                  {%- if block.settings.email != blank -%}
                    <div class="content-contact-item flex items-center gap-3">
                      <div class="w-10 h-10 flex items-center justify-center rounded-lg" style="background: color-mix(in srgb, var(--content-accent) 10%, transparent);">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                          <rect width="20" height="16" x="2" y="4" rx="2"/>
                          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm" style="color: var(--content-text); opacity: 0.7;">البريد الإلكتروني</p>
                        <a href="mailto:{{ block.settings.email }}" class="font-medium hover:underline" style="color: var(--content-accent);" dir="ltr">{{ block.settings.email }}</a>
                      </div>
                    </div>
                  {%- endif -%}
                  
                  {%- if block.settings.phone != blank -%}
                    <div class="content-contact-item flex items-center gap-3">
                      <div class="w-10 h-10 flex items-center justify-center rounded-lg" style="background: color-mix(in srgb, var(--content-accent) 10%, transparent);">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm" style="color: var(--content-text); opacity: 0.7;">الهاتف</p>
                        <a href="tel:{{ block.settings.phone }}" class="font-medium hover:underline" style="color: var(--content-accent);" dir="ltr">{{ block.settings.phone }}</a>
                      </div>
                    </div>
                  {%- endif -%}
                  
                  {%- if block.settings.address != blank -%}
                    <div class="content-contact-item flex items-center gap-3">
                      <div class="w-10 h-10 flex items-center justify-center rounded-lg" style="background: color-mix(in srgb, var(--content-accent) 10%, transparent);">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--content-accent);">
                          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                          <circle cx="12" cy="10" r="3"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm" style="color: var(--content-text); opacity: 0.7;">العنوان</p>
                        <p class="font-medium" style="color: var(--content-accent);">{{ block.settings.address }}</p>
                      </div>
                    </div>
                  {%- endif -%}
                </div>
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    {%- else -%}
      <!-- Show page content if no blocks -->
      {%- if page.content != blank -%}
        <div class="content-page-body prose prose-lg" style="color: var(--content-text); font-size: var(--content-body-size); line-height: 1.8;">
          {{ page.content }}
        </div>
      {%- endif -%}
    {%- endif -%}
  </div>
</section>

<style>
  .content-page .content-heading {
    font-size: var(--content-heading-desktop);
  }

  @media (max-width: 1024px) {
    .content-page .content-heading {
      font-size: var(--content-heading-tablet);
    }
  }

  @media (max-width: 768px) {
    .content-page .content-heading {
      font-size: var(--content-heading-mobile);
    }
  }

  /* Rich text content styling */
  .content-page .prose h1,
  .content-page .prose h2,
  .content-page .prose h3,
  .content-page .prose h4,
  .content-page .prose h5,
  .content-page .prose h6 {
    color: var(--content-accent);
    font-weight: 600;
    margin-top: 1.5em;
    margin-bottom: 0.75em;
  }


  .content-page .prose p {
    margin-bottom: 1em;
  }

  .content-page .prose a {
    color: var(--content-accent);
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  .content-page .prose a:hover {
    opacity: 0.8;
  }

  .content-page .prose ul,
  .content-page .prose ol {
    margin: 1em 0;
    padding-right: 1.5em;
  }

  .content-page .prose li {
    margin-bottom: 0.5em;
  }

  .content-page .prose strong {
    color: var(--content-accent);
    font-weight: 600;
  }

  .content-page .prose blockquote {
    border-right: 4px solid var(--content-accent);
    padding-right: 1em;
    margin: 1.5em 0;
    font-style: italic;
    opacity: 0.9;
  }

  .content-page .prose table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5em 0;
  }

  .content-page .prose th,
  .content-page .prose td {
    padding: 0.75em 1em;
    border: 1px solid color-mix(in srgb, var(--content-text) 15%, transparent);
    text-align: right;
  }

  .content-page .prose th {
    background: color-mix(in srgb, var(--content-accent) 5%, transparent);
    font-weight: 600;
    color: var(--content-accent);
  }

  @media (prefers-reduced-motion: reduce) {
    .content-page * {
      transition: none !important;
    }
  }
</style>

{% schema %}
{
  "name": "t:sections.content_page.name",
  "tag": "section",
  "class": "section-content-page",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.content_page.settings.header.content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.content_page.settings.heading.label",
      "default": "سياسة الخصوصية"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "t:sections.content_page.settings.subheading.label",
      "default": "نحن نهتم بخصوصيتك وحماية بياناتك الشخصية"
    },
    {
      "type": "checkbox",
      "id": "show_last_updated",
      "label": "t:sections.content_page.settings.show_last_updated.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.content_page.settings.header.content"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.content_page.settings.color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.content_page.settings.header.content"
    },
    {
      "type": "range",
      "id": "heading_size_desktop",
      "label": "t:sections.content_page.settings.heading_size_desktop.label",
      "default": 36,
      "min": 24,
      "max": 56,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "heading_size_tablet",
      "label": "t:sections.content_page.settings.heading_size_tablet.label",
      "default": 28,
      "min": 20,
      "max": 40,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "label": "t:sections.content_page.settings.heading_size_mobile.label",
      "default": 24,
      "min": 18,
      "max": 32,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "label": "t:sections.content_page.settings.subheading_size.label",
      "default": 18,
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "body_size",
      "label": "t:sections.content_page.settings.body_size.label",
      "default": 16,
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "block_heading_size",
      "label": "t:sections.content_page.settings.block_heading_size.label",
      "default": 22,
      "min": 18,
      "max": 28,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "t:sections.content_page.settings.heading_weight.label",
      "default": "700",
      "options": [
        {
          "value": "500",
          "label": "t:sections.content_page.settings.heading_weight.options.500"
        },
        {
          "value": "600",
          "label": "t:sections.content_page.settings.heading_weight.options.600"
        },
        {
          "value": "700",
          "label": "t:sections.content_page.settings.heading_weight.options.700"
        },
        {
          "value": "800",
          "label": "t:sections.content_page.settings.heading_weight.options.800"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.content_page.settings.header.content"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "t:sections.content_page.settings.content_width.label",
      "default": "800",
      "options": [
        {
          "value": "700",
          "label": "t:sections.content_page.settings.content_width.options.700"
        },
        {
          "value": "800",
          "label": "t:sections.content_page.settings.content_width.options.800"
        },
        {
          "value": "1000",
          "label": "t:sections.content_page.settings.content_width.options.1000"
        },
        {
          "value": "1200",
          "label": "t:sections.content_page.settings.content_width.options.1200"
        }
      ]
    },
    {
      "type": "range",
      "id": "card_radius",
      "label": "t:sections.content_page.settings.card_radius.label",
      "default": 16,
      "min": 0,
      "max": 32,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.content_page.settings.padding_top.label",
      "default": 60,
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.content_page.settings.padding_bottom.label",
      "default": 60,
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "content_block",
      "name": "t:sections.content_page.blocks.content_block.name",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_icon",
          "label": "t:sections.content_page.blocks.content_block.settings.show_icon.label",
          "default": true
        },
        {
          "type": "select",
          "id": "icon_type",
          "label": "t:sections.content_page.blocks.content_block.settings.icon_type.label",
          "default": "document",
          "options": [
            {
              "value": "document",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.document"
            },
            {
              "value": "shield",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.shield"
            },
            {
              "value": "refresh",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.refresh"
            },
            {
              "value": "truck",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.truck"
            },
            {
              "value": "phone",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.phone"
            },
            {
              "value": "info",
              "label": "t:sections.content_page.blocks.content_block.settings.icon_type.options.info"
            }
          ]
        },
        {
          "type": "text",
          "id": "block_heading",
          "label": "t:sections.content_page.blocks.content_block.settings.block_heading.label",
          "default": "مقدمة"
        },
        {
          "type": "richtext",
          "id": "block_content",
          "label": "t:sections.content_page.blocks.content_block.settings.block_content.label",
          "default": "<p>أضف محتوى القسم هنا. يمكنك تنسيق النص وإضافة عناوين فرعية وقوائم وروابط.</p>"
        }
      ]
    },
    {
      "type": "divider",
      "name": "t:sections.content_page.blocks.divider.name",
      "settings": []
    },
    {
      "type": "contact_info",
      "name": "t:sections.content_page.blocks.contact_info.name",
      "settings": [
        {
          "type": "text",
          "id": "contact_heading",
          "label": "t:sections.content_page.blocks.contact_info.settings.contact_heading.label",
          "default": "تواصل معنا"
        },
        {
          "type": "text",
          "id": "email",
          "label": "t:sections.content_page.blocks.contact_info.settings.email.label",
          "default": "support@sallety-theme.dev"
        },
        {
          "type": "text",
          "id": "phone",
          "label": "t:sections.content_page.blocks.contact_info.settings.phone.label",
          "default": "+201027706834"
        },
        {
          "type": "text",
          "id": "address",
          "label": "t:sections.content_page.blocks.contact_info.settings.address.label",
          "default": "المملكة العربية السعودية"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.content_page.name",
      "blocks": [
        {
          "type": "content_block",
          "settings": {
            "block_heading": "مقدمة",
            "block_content": "<p>نحن في متجرنا نلتزم بحماية خصوصيتك وبياناتك الشخصية. توضح هذه السياسة كيفية جمع واستخدام وحماية معلوماتك.</p>",
            "icon_type": "document"
          }
        },
        {
          "type": "content_block",
          "settings": {
            "block_heading": "جمع البيانات",
            "block_content": "<p>نقوم بجمع المعلومات التي تقدمها لنا عند:</p><ul><li>إنشاء حساب</li><li>إجراء عملية شراء</li><li>التواصل معنا</li><li>الاشتراك في النشرة البريدية</li></ul>",
            "icon_type": "shield"
          }
        },
        {
          "type": "contact_info"
        }
      ]
    }
  ]
}
{% endschema %}

