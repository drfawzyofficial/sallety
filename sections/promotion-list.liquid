{%- comment -%}
  Promotion List Section - قائمة المميزات
  Block-based promotional features with icons
  RTL layout with Arabic labels - Following Sallety Theme Patterns
{%- endcomment -%}

{%- liquid
  # Color scheme class (uses CSS classes from theme.liquid)
  assign scheme_number = section.settings.color_scheme.id | remove: 'scheme-'

  # Typography - Weights
  assign heading_weight = section.settings.heading_weight | default: '600'
  assign body_weight = section.settings.body_weight | default: '400'

  # Section settings
  assign padding_top = section.settings.padding_top | default: 24
  assign padding_bottom = section.settings.padding_bottom | default: 24
  assign border_radius = section.settings.border_radius | default: 16
  assign icon_size = section.settings.icon_size | default: 40

  # Grid columns
  assign columns_desktop = section.settings.columns_desktop | default: 4
  assign columns_tablet = section.settings.columns_tablet | default: 2
  assign columns_mobile = section.settings.columns_mobile | default: 1
-%}

{%- capture section_dir -%}{%- render 'section-dir' -%}{%- endcapture -%}
<section
  class="promotion-list-section color-scheme-{{ scheme_number }} relative overflow-hidden"
  dir="{{ section_dir }}"
  data-section-id="{{ section.id }}"
  data-section-type="promotion-list"
  style="
    --promo-heading-weight: {{ heading_weight }};
    --promo-body-weight: {{ body_weight }};
    --promo-padding-top: {{ padding_top }}px;
    --promo-padding-bottom: {{ padding_bottom }}px;
    --promo-border-radius: {{ border_radius }}px;
    --promo-icon-size: {{ icon_size }}px;
    --promo-columns-desktop: {{ columns_desktop }};
    --promo-columns-tablet: {{ columns_tablet }};
    --promo-columns-mobile: {{ columns_mobile }};
    font-family: var(--font-body-family);
  "
>
  <div class="promo-container">
    <div class="promo-inner">
      {%- if section.blocks.size > 0 -%}
        <div class="promo-grid">
          {%- for block in section.blocks -%}
            <div class="promo-item" {{ block.shopify_attributes }}>
              {%- comment -%} Icon {%- endcomment -%}
              <div class="promo-icon">
                {%- case block.settings.icon -%}
                  {%- when 'truck' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect x="1" y="3" width="15" height="13" rx="2"/>
                      <path d="M16 8h4l3 3v5h-7V8z"/>
                      <circle cx="5.5" cy="18.5" r="2.5"/>
                      <circle cx="18.5" cy="18.5" r="2.5"/>
                    </svg>

                  {%- when 'headset' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M3 18v-6a9 9 0 0 1 18 0v6"/>
                      <path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3v5z"/>
                      <path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3v5z"/>
                      <circle cx="12" cy="21" r="1"/>
                      <path d="M12 21h4"/>
                    </svg>

                  {%- when 'refresh' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M23 4v6h-6"/>
                      <path d="M1 20v-6h6"/>
                      <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"/>
                      <path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"/>
                    </svg>

                  {%- when 'stars' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.6-6.3 4.6 2.3-7-6-4.6h7.6z"/>
                      <path d="M5 18l-2 2"/>
                      <path d="M19 18l2 2"/>
                      <path d="M12 22v-2"/>
                    </svg>

                  {%- when 'shield' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                      <path d="M9 12l2 2 4-4"/>
                    </svg>

                  {%- when 'credit-card' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect x="1" y="4" width="22" height="16" rx="2"/>
                      <line x1="1" y1="10" x2="23" y2="10"/>
                      <line x1="6" y1="15" x2="6.01" y2="15"/>
                      <line x1="10" y1="15" x2="14" y2="15"/>
                    </svg>

                  {%- when 'gift' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <polyline points="20 12 20 22 4 22 4 12"/>
                      <rect x="2" y="7" width="20" height="5"/>
                      <line x1="12" y1="22" x2="12" y2="7"/>
                      <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/>
                      <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>
                    </svg>

                  {%- when 'clock' -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="12" cy="12" r="10"/>
                      <polyline points="12 6 12 12 16 14"/>
                    </svg>

                  {%- else -%}
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="12" cy="12" r="10"/>
                      <path d="M9 12l2 2 4-4"/>
                    </svg>
                {%- endcase -%}
              </div>

              {%- comment -%} Content {%- endcomment -%}
              <div class="promo-content">
                {%- if block.settings.heading != blank -%}
                  <h5 class="promo-heading">{{ block.settings.heading }}</h5>
                {%- endif -%}

                {%- if block.settings.description != blank -%}
                  <p class="promo-description">{{ block.settings.description }}</p>
                {%- endif -%}
              </div>
            </div>
          {%- endfor -%}
        </div>
      {%- else -%}
        {%- comment -%} Placeholder when no blocks {%- endcomment -%}
        <div class="promo-placeholder">
          <p>أضف عناصر المميزات من إعدادات القسم</p>
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

<style>
  /* ================================
     PROMOTION LIST SECTION STYLES
     ================================ */

  .promotion-list-section {
    position: relative;
  }

  .promo-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 16px;
  }

  @media (min-width: 768px) {
    .promo-container {
      padding: 0 24px;
    }
  }

  @media (min-width: 1024px) {
    .promo-container {
      padding: 0 64px;
    }
  }

  .promo-inner {
    background-color: var(--color-background);
    border-radius: var(--promo-border-radius);
    padding: var(--promo-padding-top) 24px var(--promo-padding-bottom);
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .promo-inner {
      padding: var(--promo-padding-top) 40px var(--promo-padding-bottom);
    }
  }

  @media (min-width: 1024px) {
    .promo-inner {
      padding: var(--promo-padding-top) 60px var(--promo-padding-bottom);
    }
  }

  /* Grid Layout */
  .promo-grid {
    display: grid;
    grid-template-columns: repeat(var(--promo-columns-mobile, 1), 1fr);
    gap: 24px;
  }

  @media (min-width: 640px) {
    .promo-grid {
      grid-template-columns: repeat(var(--promo-columns-tablet, 2), 1fr);
      gap: 32px;
    }
  }

  @media (min-width: 1024px) {
    .promo-grid {
      grid-template-columns: repeat(var(--promo-columns-desktop, 4), 1fr);
      gap: 40px;
    }
  }

  /* Individual Item */
  .promo-item {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 16px;
    text-align: right;
  }

  @media (min-width: 640px) {
    .promo-item {
      flex-direction: row;
      text-align: right;
    }
  }

  /* Icon */
  .promo-icon {
    flex-shrink: 0;
    width: var(--promo-icon-size);
    height: var(--promo-icon-size);
    color: var(--color-text);
    opacity: 0.9;
  }

  .promo-icon svg {
    width: 100%;
    height: 100%;
  }

  /* Content */
  .promo-content {
    flex: 1;
    min-width: 0;
  }

  .promo-heading {
    color: var(--color-text);
    margin: 0 0 6px 0;
    line-height: 1.3;
  }

  .promo-description {
    color: var(--color-text);
    opacity: 0.85;
    margin: 0;
    line-height: 1.6;
  }

  /* Placeholder */
  .promo-placeholder {
    text-align: center;
    padding: 40px 20px;
    color: var(--color-text);
    opacity: 0.6;
  }

  .promo-placeholder p {
    margin: 0;
    font-size: var(--font-body-size, 16px);
  }

  /* Animation on scroll */
  .promo-item {
    opacity: 0;
    transform: translateY(20px);
    animation: promo-fade-in 0.5s ease forwards;
  }

  .promo-item:nth-child(1) {
    animation-delay: 0.1s;
  }
  .promo-item:nth-child(2) {
    animation-delay: 0.2s;
  }
  .promo-item:nth-child(3) {
    animation-delay: 0.3s;
  }
  .promo-item:nth-child(4) {
    animation-delay: 0.4s;
  }
  .promo-item:nth-child(5) {
    animation-delay: 0.5s;
  }
  .promo-item:nth-child(6) {
    animation-delay: 0.6s;
  }

  @keyframes promo-fade-in {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .promo-item {
      opacity: 1;
      transform: none;
      animation: none;
    }
  }
</style>

{% schema %}
{
  "name": "t:sections.promotion_list.name",
  "tag": "section",
  "class": "section-promotion-list",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.promotion_list.settings.color_scheme.label",
      "default": "scheme-3"
    },
    {
      "type": "header",
      "content": "t:sections.promotion_list.settings.header.content"
    },
    {
      "type": "header",
      "content": "t:sections.promotion_list.settings.header.content"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:sections.promotion_list.settings.border_radius.label",
      "default": 16,
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "t:sections.promotion_list.settings.icon_size.label",
      "default": 40,
      "min": 24,
      "max": 60,
      "step": 4,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.promotion_list.settings.header.content"
    },
    {
      "type": "select",
      "id": "columns_desktop",
      "label": "t:sections.promotion_list.settings.columns_desktop.label",
      "options": [
        {
          "value": "1",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.1"
        },
        {
          "value": "2",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.2"
        },
        {
          "value": "3",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.3"
        },
        {
          "value": "4",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.4"
        },
        {
          "value": "5",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.5"
        },
        {
          "value": "6",
          "label": "t:sections.promotion_list.settings.columns_desktop.options.6"
        }
      ],
      "default": "4"
    },
    {
      "type": "select",
      "id": "columns_tablet",
      "label": "t:sections.promotion_list.settings.columns_tablet.label",
      "options": [
        {
          "value": "1",
          "label": "t:sections.promotion_list.settings.columns_tablet.options.1"
        },
        {
          "value": "2",
          "label": "t:sections.promotion_list.settings.columns_tablet.options.2"
        },
        {
          "value": "3",
          "label": "t:sections.promotion_list.settings.columns_tablet.options.3"
        },
        {
          "value": "4",
          "label": "t:sections.promotion_list.settings.columns_tablet.options.4"
        }
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "t:sections.promotion_list.settings.columns_mobile.label",
      "options": [
        {
          "value": "1",
          "label": "t:sections.promotion_list.settings.columns_mobile.options.1"
        },
        {
          "value": "2",
          "label": "t:sections.promotion_list.settings.columns_mobile.options.2"
        }
      ],
      "default": "1"
    },
    {
      "type": "header",
      "content": "t:sections.promotion_list.settings.header.content"
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "t:sections.promotion_list.settings.heading_weight.label",
      "default": "600",
      "options": [
        {
          "value": "400",
          "label": "t:sections.promotion_list.settings.heading_weight.options.400"
        },
        {
          "value": "500",
          "label": "t:sections.promotion_list.settings.heading_weight.options.500"
        },
        {
          "value": "600",
          "label": "t:sections.promotion_list.settings.heading_weight.options.600"
        },
        {
          "value": "700",
          "label": "t:sections.promotion_list.settings.heading_weight.options.700"
        }
      ]
    },
    {
      "type": "select",
      "id": "body_weight",
      "label": "t:sections.promotion_list.settings.body_weight.label",
      "default": "400",
      "options": [
        {
          "value": "400",
          "label": "t:sections.promotion_list.settings.body_weight.options.400"
        },
        {
          "value": "500",
          "label": "t:sections.promotion_list.settings.body_weight.options.500"
        },
        {
          "value": "600",
          "label": "t:sections.promotion_list.settings.body_weight.options.600"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.promotion_list.settings.header.content"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.promotion_list.settings.padding_top.label",
      "default": 24,
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.promotion_list.settings.padding_bottom.label",
      "default": 24,
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "promotion_list_item",
      "name": "t:sections.promotion_list.blocks.promotion_list_item.name",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.label",
          "default": "truck",
          "options": [
            {
              "value": "truck",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.truck"
            },
            {
              "value": "headset",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.headset"
            },
            {
              "value": "refresh",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.refresh"
            },
            {
              "value": "stars",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.stars"
            },
            {
              "value": "shield",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.shield"
            },
            {
              "value": "credit-card",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.credit-card"
            },
            {
              "value": "gift",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.gift"
            },
            {
              "value": "clock",
              "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.icon.options.clock"
            }
          ]
        },
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.heading.label",
          "default": "توصيل مجاني"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "t:sections.promotion_list.blocks.promotion_list_item.settings.description.label",
          "default": "استمتع بتوصيل مجاني لجميع الطلبات داخل المملكة."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.promotion_list.name",
      "blocks": [
        {
          "type": "promotion_list_item",
          "settings": {
            "icon": "truck",
            "heading": "توصيل مجاني",
            "description": "استمتع بتوصيل مجاني لجميع الطلبات داخل المملكة."
          }
        },
        {
          "type": "promotion_list_item",
          "settings": {
            "icon": "headset",
            "heading": "خدمة عملاء مميزة",
            "description": "فريق دعم جاهز للإجابة على استفساراتك ومساعدتك."
          }
        },
        {
          "type": "promotion_list_item",
          "settings": {
            "icon": "refresh",
            "heading": "سهولة الاسترداد",
            "description": "إرجاع أو استبدال المنتجات بسهولة ومرونة."
          }
        },
        {
          "type": "promotion_list_item",
          "settings": {
            "icon": "stars",
            "heading": "جودة عالية",
            "description": "منتجات مختارة بعناية بأقمشة فاخرة وتصاميم متقنة."
          }
        }
      ]
    }
  ]
}
{% endschema %}
