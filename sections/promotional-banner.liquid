{%- comment -%}
  Promotional Banner Section
  A split layout section with image and promotional content
  Design inspired by National Day promotional banners
  Supports RTL/LTR, color schemes, and responsive design.
{%- endcomment -%}

{%- liquid
  assign content_position = section.settings.content_position | default: 'right'
  assign padding_top = section.settings.padding_top | default: 0
  assign padding_bottom = section.settings.padding_bottom | default: 0
-%}

{%- capture section_dir -%}{%- render 'section-dir' -%}{%- endcapture -%}

<section
  id="promotional-banner-{{ section.id }}"
  class="promotional-banner color-{{ section.settings.color_scheme }}"
  dir="{{ section_dir }}"
  style="padding-top: {{ padding_top }}px; padding-bottom: {{ padding_bottom }}px;"
>
  <div class="grid grid-cols-1 lg:grid-cols-2 relative">
    {%- if content_position == 'right' -%}
      <!-- Image Section -->
      <div
        class="promo-image relative overflow-hidden order-1 lg:order-1"
        style="background-color: var(--color-background-secondary, #e5e7eb);"
      >
        {%- render 'promo-image-content', section: section -%}
      </div>

      <!-- Content Section -->
      <div
        class="promo-content flex items-center justify-center p-8 lg:p-16 order-2 lg:order-2"
        style="background-color: {{ section.settings.content_bg_color }};"
      >
        {%- render 'promo-text-content', section: section -%}
      </div>
    {%- else -%}
      <!-- Content Section -->
      <div
        class="promo-content flex items-center justify-center p-8 lg:p-16 order-2 lg:order-1"
        style="background-color: {{ section.settings.content_bg_color }};"
      >
        {%- render 'promo-text-content', section: section -%}
      </div>

      <!-- Image Section -->
      <div
        class="promo-image relative overflow-hidden order-1 lg:order-2"
        style="background-color: var(--color-background-secondary, #e5e7eb);"
      >
        {%- render 'promo-image-content', section: section -%}
      </div>
    {%- endif -%}
  </div>
</section>

<style>
  #promotional-banner-{{ section.id }} .promo-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    min-height: 250px;
  }

  @media (min-width: 640px) {
    #promotional-banner-{{ section.id }} .promo-image img {
      min-height: 300px;
    }
  }

  @media (min-width: 1024px) {
    #promotional-banner-{{ section.id }} .promo-image img {
      min-height: 600px;
    }
  }

  #promotional-banner-{{ section.id }} .discount-badge {
    animation: promo-pulse-subtle 2s ease-in-out infinite;
  }

  @keyframes promo-pulse-subtle {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }

  /* Arrow hover animation */
  #promotional-banner-{{ section.id }} .promo-cta:hover .promo-cta__arrow {
    transform: translateX(4px);
  }

  /* RTL: flip arrow icon and reverse hover direction */
  [dir="rtl"] #promotional-banner-{{ section.id }} .promo-cta__arrow {
    transform: scaleX(-1);
  }
  [dir="rtl"] #promotional-banner-{{ section.id }} .promo-cta:hover .promo-cta__arrow {
    transform: scaleX(-1) translateX(4px);
  }

  /* Outline button hover */
  #promotional-banner-{{ section.id }} .promo-cta--outline:hover {
    background-color: {{ section.settings.content_text_color }};
    color: {{ section.settings.content_bg_color }};
  }

  #promotional-banner-{{ section.id }} .dots-decoration {
    backdrop-filter: blur(4px);
  }

  @media (prefers-reduced-motion: reduce) {
    #promotional-banner-{{ section.id }} .discount-badge {
      animation: none;
    }
  }
</style>

{% schema %}
{
  "name": "t:sections.promotional_banner.name",
  "tag": "section",
  "class": "section-promotional-banner",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.promotional_banner.settings.color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.promotional_banner.settings.layout.header"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "t:sections.promotional_banner.settings.content_position.label",
      "default": "right",
      "options": [
        {
          "value": "left",
          "label": "t:sections.promotional_banner.settings.content_position.options.left"
        },
        {
          "value": "right",
          "label": "t:sections.promotional_banner.settings.content_position.options.right"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.promotional_banner.settings.image.header"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.promotional_banner.settings.image.label"
    },
    {
      "type": "text",
      "id": "image_alt",
      "label": "t:sections.promotional_banner.settings.image_alt.label"
    },
    {
      "type": "checkbox",
      "id": "show_discount_badge",
      "label": "t:sections.promotional_banner.settings.show_discount_badge.label",
      "default": true
    },
    {
      "type": "text",
      "id": "discount_value",
      "label": "t:sections.promotional_banner.settings.discount_value.label",
      "default": "65 %"
    },
    {
      "type": "text",
      "id": "discount_label",
      "label": "t:sections.promotional_banner.settings.discount_label.label",
      "default": "خصم"
    },
    {
      "type": "checkbox",
      "id": "show_decoration",
      "label": "t:sections.promotional_banner.settings.show_decoration.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.promotional_banner.settings.content.header"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "t:sections.promotional_banner.settings.content_bg_color.label",
      "default": "#0f172a"
    },
    {
      "type": "color",
      "id": "content_text_color",
      "label": "t:sections.promotional_banner.settings.content_text_color.label",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.promotional_banner.settings.heading.label",
      "default": "عروض وخصومات اليوم الوطني"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "t:sections.promotional_banner.settings.description.label",
      "default": "اكتشفي تشكيلتنا المميزة من العبايات الخليجية والفساتين الفاخرة، حيث تمتزج الأصالة بروح التصميم العصري لتمنحك إطلالة متجددة في كل مناسبة."
    },
    {
      "type": "header",
      "content": "t:sections.promotional_banner.settings.button.header"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "t:sections.promotional_banner.settings.button_text.label",
      "default": "تسوقي الآن"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:sections.promotional_banner.settings.button_link.label"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "t:sections.promotional_banner.settings.button_style.label",
      "default": "outline",
      "options": [
        {
          "value": "primary",
          "label": "t:sections.promotional_banner.settings.button_style.options.primary"
        },
        {
          "value": "outline",
          "label": "t:sections.promotional_banner.settings.button_style.options.outline"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.all.padding.padding_top",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "t:sections.promotional_banner.presets.name"
    }
  ]
}
{% endschema %}
