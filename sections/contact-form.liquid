{%- comment -%}
  Contact Form Section - نموذج الاتصال
  Two-column layout: Contact Form + Contact Details
  RTL layout with Arabic labels - Following Sallety Theme Patterns
{%- endcomment -%}

{%- liquid
  # Color scheme class (uses CSS classes from theme.liquid)
  assign scheme_number = section.settings.color_scheme.id | remove: 'scheme-'

  # Section settings
  assign section_heading = section.settings.heading
  assign section_subheading = section.settings.subheading
  assign show_heading = section.settings.show_heading
  assign layout = section.settings.layout | default: 'form-right'
  assign show_shapes = section.settings.show_shapes
  assign card_radius = section.settings.card_radius | default: 16
  assign padding_top = section.settings.padding_top | default: 60
  assign padding_bottom = section.settings.padding_bottom | default: 60

  # Layout order (RTL context - form-right means form appears on right in RTL)
  if layout == 'form-right'
    assign form_order = 'order-1'
    assign details_order = 'order-2'
  else
    assign form_order = 'order-2 lg:order-2'
    assign details_order = 'order-1 lg:order-1'
  endif
-%}

{%- capture section_dir -%}{%- render 'section-dir' -%}{%- endcapture -%}
<section
  class="contact-form-section color-scheme-{{ scheme_number }} relative overflow-hidden"
  dir="{{ section_dir }}"
  data-section-id="{{ section.id }}"
  data-section-type="contact-form"
  style="
    --contact-card-radius: {{ card_radius }}px;
    padding-top: {{ padding_top }}px;
    padding-bottom: {{ padding_bottom }}px;
  "
>
  <!-- Decorative Parallax Shapes -->
  {%- if show_shapes -%}
    <div class="contact-shapes" aria-hidden="true">
      <div class="contact-shape contact-shape-1"></div>
      <div class="contact-shape contact-shape-2"></div>
      <div class="contact-shape contact-shape-3"></div>
      <div class="contact-shape contact-shape-4"></div>
    </div>
  {%- endif -%}

  <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-16 relative z-10">
    <!-- Section Header -->
    {%- if show_heading and section_heading != blank -%}
      <div class="contact-header text-center mb-10 sm:mb-12 lg:mb-14 animate-on-scroll aos-fade-up">
        <h1 class="contact-main-heading leading-tight m-0 mb-3" style="color: var(--color-accent);">
          {{ section_heading }}
        </h1>
        {%- if section_subheading != blank -%}
          <p class="contact-subheading m-0 max-w-2xl mx-auto" style="color: var(--color-secondary-text);">
            {{ section_subheading }}
          </p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <!-- Two Column Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-10 lg:gap-12 items-start">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'contact_form' -%}
            <!-- Contact Form Block -->
            <div class="{{ form_order }} animate-on-scroll aos-fade-up" {{ block.shopify_attributes }}>
              <div
                class="contact-form-card p-6 sm:p-8 lg:p-10"
                style="background: var(--color-card-background); border-radius: var(--contact-card-radius); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);"
              >
                {%- if block.settings.form_heading != blank -%}
                  <h2
                    class="contact-form-title text-xl sm:text-2xl font-semibold mb-6"
                    style="color: var(--color-accent);"
                  >
                    {{ block.settings.form_heading }}
                  </h2>
                {%- endif -%}

                {% form 'contact', class: 'contact-form__form space-y-5' %}
                  {%- if form.posted_successfully? -%}
                    <div class="contact-form-message contact-form-message--success animate-fade-in">
                      <div class="contact-form-message__icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                          <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                      </div>
                      <div class="contact-form-message__content">
                        <h4 class="contact-form-message__title">
                          {{ 'contact.form.success_title' | t | default: 'تم الإرسال بنجاح!' }}
                        </h4>
                        <p class="contact-form-message__text">
                          {{ block.settings.success_message | default: 'شكراً لتواصلك معنا! سنرد عليك في أقرب وقت.' }}
                        </p>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if form.errors -%}
                    <div class="contact-form-message contact-form-message--error animate-fade-in">
                      <div class="contact-form-message__icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                          <circle cx="12" cy="12" r="10"/>
                          <line x1="15" y1="9" x2="9" y2="15"/>
                          <line x1="9" y1="9" x2="15" y2="15"/>
                        </svg>
                      </div>
                      <div class="contact-form-message__content">
                        <h4 class="contact-form-message__title">
                          {{ 'contact.form.error_title' | t | default: 'حدث خطأ!' }}
                        </h4>
                        <div class="contact-form-message__text">{{ form.errors | default_errors }}</div>
                      </div>
                    </div>
                  {%- endif -%}

                  <div class="form-field">
                    <label
                      for="contact-name-{{ section.id }}"
                      class="block text-sm font-medium mb-2"
                      style="color: var(--color-text);"
                    >
                      {{ 'contact.form.name' | t }}
                      <span class="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      id="contact-name-{{ section.id }}"
                      name="contact[{{ 'contact.form.name' | t }}]"
                      class="contact-input w-full transition-all duration-200"
                      autocomplete="name"
                      required
                      placeholder="{{ 'contact.form.name' | t }}"
                    >
                  </div>

                  <div class="form-field">
                    <label
                      for="contact-email-{{ section.id }}"
                      class="block text-sm font-medium mb-2"
                      style="color: var(--color-text);"
                    >
                      {{ 'contact.form.email' | t }}
                      <span class="text-red-500">*</span>
                    </label>
                    <input
                      type="email"
                      id="contact-email-{{ section.id }}"
                      name="contact[email]"
                      class="contact-input w-full transition-all duration-200"
                      autocomplete="email"
                      autocorrect="off"
                      autocapitalize="off"
                      required
                      placeholder="{{ 'contact.form.email' | t }}"
                      dir="ltr"
                    >
                  </div>

                  <div class="form-field">
                    <label
                      for="contact-phone-{{ section.id }}"
                      class="block text-sm font-medium mb-2"
                      style="color: var(--color-text);"
                    >
                      {{ 'contact.form.phone' | t }}
                    </label>
                    <input
                      type="tel"
                      id="contact-phone-{{ section.id }}"
                      name="contact[{{ 'contact.form.phone' | t }}]"
                      class="contact-input w-full transition-all duration-200"
                      autocomplete="tel"
                      placeholder="{{ 'contact.form.phone' | t }}"
                      dir="ltr"
                    >
                  </div>

                  <div class="form-field">
                    <label
                      for="contact-message-{{ section.id }}"
                      class="block text-sm font-medium mb-2"
                      style="color: var(--color-text);"
                    >
                      {{ 'contact.form.message' | t }}
                      <span class="text-red-500">*</span>
                    </label>
                    <textarea
                      id="contact-message-{{ section.id }}"
                      name="contact[{{ 'contact.form.message' | t }}]"
                      class="contact-input contact-textarea w-full transition-all duration-200"
                      required
                      placeholder="{{ 'contact.form.message' | t }}"
                    ></textarea>
                  </div>

                  <button
                    type="submit"
                    class="btn btn--full contact-submit-btn"
                  >
                    <span>{{ block.settings.button_text | default: 'إرسال الرسالة' }}</span>
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="22" y1="2" x2="11" y2="13"/>
                      <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                    </svg>
                  </button>
                {% endform %}
              </div>
            </div>

          {%- when 'contact_details' -%}
            <!-- Contact Details Block -->
            <div
              class="{{ details_order }} animate-on-scroll aos-fade-up"
              data-aos-delay="200"
              {{ block.shopify_attributes }}
            >
              <div
                class="contact-details-card p-6 sm:p-8 lg:p-10 h-full"
                style="background: color-mix(in srgb, var(--color-accent) 5%, var(--color-card-background)); border-radius: var(--contact-card-radius); border: 1px solid color-mix(in srgb, var(--color-accent) 15%, transparent);"
              >
                {%- if block.settings.details_heading != blank -%}
                  <h2
                    class="contact-details-title text-xl sm:text-2xl font-semibold mb-8"
                    style="color: var(--color-accent);"
                  >
                    {{ block.settings.details_heading }}
                  </h2>
                {%- endif -%}

                <div class="contact-details-list space-y-6">
                  {%- if block.settings.email != blank -%}
                    <div class="contact-detail-item flex items-start gap-4">
                      <div
                        class="contact-detail-icon w-12 h-12 flex items-center justify-center rounded-xl flex-shrink-0"
                        style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                      >
                        <svg
                          class="w-6 h-6"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          style="color: var(--color-accent);"
                        >
                          <rect width="20" height="16" x="2" y="4" rx="2"/>
                          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm mb-1" style="color: var(--color-secondary-text);">
                          {{ 'contact.details.email' | t }}
                        </p>
                        <a
                          href="mailto:{{ block.settings.email }}"
                          class="text-base font-medium hover:underline transition-colors"
                          style="color: var(--color-accent);"
                          dir="ltr"
                        >
                          {{ block.settings.email }}
                        </a>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.phone != blank -%}
                    <div class="contact-detail-item flex items-start gap-4">
                      <div
                        class="contact-detail-icon w-12 h-12 flex items-center justify-center rounded-xl flex-shrink-0"
                        style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                      >
                        <svg
                          class="w-6 h-6"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          style="color: var(--color-accent);"
                        >
                          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm mb-1" style="color: var(--color-secondary-text);">
                          {{ 'contact.details.phone' | t }}
                        </p>
                        <a
                          href="tel:{{ block.settings.phone | remove: ' ' }}"
                          class="text-base font-medium hover:underline transition-colors"
                          style="color: var(--color-accent);"
                          dir="ltr"
                        >
                          {{ block.settings.phone }}
                        </a>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.whatsapp != blank -%}
                    <div class="contact-detail-item flex items-start gap-4">
                      <div
                        class="contact-detail-icon w-12 h-12 flex items-center justify-center rounded-xl flex-shrink-0"
                        style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                      >
                        <svg
                          class="w-6 h-6"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          style="color: var(--color-accent);"
                        >
                          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm mb-1" style="color: var(--color-secondary-text);">
                          {{ 'contact.details.whatsapp' | t }}
                        </p>
                        <a
                          href="https://wa.me/{{ block.settings.whatsapp | remove: '+' | remove: ' ' | remove: '-' }}"
                          target="_blank"
                          rel="noopener"
                          class="text-base font-medium hover:underline transition-colors"
                          style="color: var(--color-accent);"
                          dir="ltr"
                        >
                          {{ block.settings.whatsapp }}
                        </a>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.address != blank -%}
                    <div class="contact-detail-item flex items-start gap-4">
                      <div
                        class="contact-detail-icon w-12 h-12 flex items-center justify-center rounded-xl flex-shrink-0"
                        style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                      >
                        <svg
                          class="w-6 h-6"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          style="color: var(--color-accent);"
                        >
                          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                          <circle cx="12" cy="10" r="3"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm mb-1" style="color: var(--color-secondary-text);">
                          {{ 'contact.details.address' | t }}
                        </p>
                        <p class="text-base font-medium" style="color: var(--color-accent);">
                          {{ block.settings.address }}
                        </p>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.working_hours != blank -%}
                    <div class="contact-detail-item flex items-start gap-4">
                      <div
                        class="contact-detail-icon w-12 h-12 flex items-center justify-center rounded-xl flex-shrink-0"
                        style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                      >
                        <svg
                          class="w-6 h-6"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          style="color: var(--color-accent);"
                        >
                          <circle cx="12" cy="12" r="10"/>
                          <polyline points="12 6 12 12 16 14"/>
                        </svg>
                      </div>
                      <div>
                        <p class="text-sm mb-1" style="color: var(--color-secondary-text);">
                          {{ 'contact.details.working_hours' | t }}
                        </p>
                        <div class="text-base font-medium prose prose-sm" style="color: var(--color-text);">
                          {{ block.settings.working_hours }}
                        </div>
                      </div>
                    </div>
                  {%- endif -%}
                </div>

                {%- if block.settings.show_social_icons -%}
                  {%- comment -%} Check if any social links are available from general settings {%- endcomment -%}
                  {%- assign has_social_links = false -%}
                  {%- if settings.social_whatsapp_link != blank
                    or settings.social_telegram_link != blank
                    or settings.social_instagram_link != blank
                    or settings.social_twitter_link != blank
                    or settings.social_facebook_link != blank
                  -%}
                    {%- assign has_social_links = true -%}
                  {%- endif -%}

                  {%- if has_social_links -%}
                    <div
                      class="contact-social mt-8 pt-6"
                      style="border-top: 1px solid color-mix(in srgb, var(--color-accent) 15%, transparent);"
                    >
                      <p class="text-sm mb-4" style="color: var(--color-secondary-text);">
                        {{ 'contact.details.follow_us' | t }}
                      </p>
                      <div class="flex items-center gap-3 flex-wrap">
                        {%- if settings.social_whatsapp_link != blank -%}
                          <a
                            href="{{ settings.social_whatsapp_link }}"
                            target="_blank"
                            rel="noopener"
                            class="contact-social-icon w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-300"
                            style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                            aria-label="WhatsApp"
                          >
                            <svg
                              class="w-5 h-5"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              style="color: var(--color-accent);"
                            >
                              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                          </a>
                        {%- endif -%}

                        {%- if settings.social_telegram_link != blank -%}
                          <a
                            href="{{ settings.social_telegram_link }}"
                            target="_blank"
                            rel="noopener"
                            class="contact-social-icon w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-300"
                            style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                            aria-label="Telegram"
                          >
                            <svg
                              class="w-5 h-5"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              style="color: var(--color-accent);"
                            >
                              <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                            </svg>
                          </a>
                        {%- endif -%}

                        {%- if settings.social_instagram_link != blank -%}
                          <a
                            href="{{ settings.social_instagram_link }}"
                            target="_blank"
                            rel="noopener"
                            class="contact-social-icon w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-300"
                            style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                            aria-label="Instagram"
                          >
                            <svg
                              class="w-5 h-5"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              style="color: var(--color-accent);"
                            >
                              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                          </a>
                        {%- endif -%}

                        {%- if settings.social_twitter_link != blank -%}
                          <a
                            href="{{ settings.social_twitter_link }}"
                            target="_blank"
                            rel="noopener"
                            class="contact-social-icon w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-300"
                            style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                            aria-label="X (Twitter)"
                          >
                            <svg
                              class="w-5 h-5"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              style="color: var(--color-accent);"
                            >
                              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                          </a>
                        {%- endif -%}

                        {%- if settings.social_facebook_link != blank -%}
                          <a
                            href="{{ settings.social_facebook_link }}"
                            target="_blank"
                            rel="noopener"
                            class="contact-social-icon w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-300"
                            style="background: color-mix(in srgb, var(--color-accent) 10%, transparent);"
                            aria-label="Facebook"
                          >
                            <svg
                              class="w-5 h-5"
                              viewBox="0 0 24 24"
                              fill="currentColor"
                              style="color: var(--color-accent);"
                            >
                              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                          </a>
                        {%- endif -%}
                      </div>
                    </div>
                  {%- endif -%}
                {%- endif -%}
              </div>
            </div>
        {%- endcase -%}
      {%- endfor -%}

      {%- if section.blocks.size == 0 -%}
        <!-- Default empty state -->
        <div class="col-span-full text-center py-12" style="color: var(--color-secondary-text);">
          <svg
            class="w-16 h-16 mx-auto mb-4 opacity-50"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          >
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
          </svg>
          <p class="text-lg font-medium mb-2">لا توجد عناصر</p>
          <p class="text-sm opacity-75">أضف كتل "نموذج الاتصال" و"معلومات التواصل" من إعدادات القسم</p>
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

<style>
  /* ================================
     CONTACT FORM SECTION STYLES
     ================================ */

  .contact-form-section {
    position: relative;
  }

  /* Typography - Uses global settings from base.css */

  /* Form Message Styles - Success & Error */
  .contact-form-message {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    border-radius: 12px;
    margin-bottom: 1.5rem;
    animation: slideInMessage 0.4s ease-out;
  }

  @keyframes slideInMessage {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .contact-form-message--success {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-success) 10%, transparent) 0%,
      color-mix(in srgb, var(--color-success) 5%, transparent) 100%
    );
    border: 1px solid color-mix(in srgb, var(--color-success) 30%, transparent);
    color: var(--color-success);
  }

  .contact-form-message--error {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-error) 10%, transparent) 0%,
      color-mix(in srgb, var(--color-error) 5%, transparent) 100%
    );
    border: 1px solid color-mix(in srgb, var(--color-error) 30%, transparent);
    color: var(--color-error);
  }

  .contact-form-message__icon {
    flex-shrink: 0;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .contact-form-message--success .contact-form-message__icon {
    background: color-mix(in srgb, var(--color-success) 15%, transparent);
  }

  .contact-form-message--error .contact-form-message__icon {
    background: color-mix(in srgb, var(--color-error) 15%, transparent);
  }

  .contact-form-message__icon svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .contact-form-message--success .contact-form-message__icon svg {
    stroke: var(--color-success);
  }

  .contact-form-message--error .contact-form-message__icon svg {
    stroke: var(--color-error);
  }

  .contact-form-message__content {
    flex: 1;
    min-width: 0;
  }

  .contact-form-message__title {
    margin: 0 0 0.25rem 0;
  }

  .contact-form-message__text {
    margin: 0;
    opacity: 0.9;
    line-height: 1.5;
  }

  .contact-form-message__text ul {
    margin: 0;
    padding-right: 1.25rem;
    list-style: disc;
  }

  .contact-form-message__text li {
    margin-bottom: 0.25rem;
  }

  .contact-textarea {
    min-height: 150px;
    resize: vertical;
  }

  /* Submit Button - Uses color scheme button colors + general button typography */
  .contact-form-section .contact-submit-btn {
    /* General button typography */
    min-height: 52px;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    background-color: var(--color-button);
    color: var(--color-button-label);
    border: 1px solid var(--color-button);
  }
  /* Hover shine effect */
  .contact-form-section .contact-submit-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
  }

  .contact-form-section .contact-submit-btn:hover::before {
    left: 100%;
  }

  .contact-form-section .contact-submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px color-mix(in srgb, var(--color-button) 30%, transparent);
    filter: brightness(1.05);
  }

  .contact-form-section .contact-submit-btn:active {
    transform: translateY(0);
  }

  /* Card Hover Effects */
  .contact-form-card,
  .contact-details-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .contact-form-card:hover,
  .contact-details-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
  }

  /* Social Icons Hover */
  .contact-social-icon {
    transform: translateY(0);
  }

  .contact-social-icon:hover {
    transform: translateY(-3px) scale(1.1);
  }

  /* ================================
     DECORATIVE SHAPES
     ================================ */
  .contact-shapes {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }

  .contact-shape {
    position: absolute;
    opacity: 0.08;
    background: var(--color-accent);
  }

  .contact-shape-1 {
    width: 300px;
    height: 300px;
    top: -100px;
    right: -80px;
    border-radius: 50%;
    animation: contact-float-1 20s ease-in-out infinite;
  }

  .contact-shape-2 {
    width: 150px;
    height: 150px;
    bottom: 10%;
    left: 5%;
    border-radius: 50%;
    animation: contact-float-2 15s ease-in-out infinite;
  }

  .contact-shape-3 {
    width: 80px;
    height: 80px;
    top: 30%;
    left: 10%;
    transform: rotate(45deg);
    animation: contact-rotate 25s linear infinite;
  }

  .contact-shape-4 {
    width: 60px;
    height: 60px;
    bottom: 20%;
    right: 15%;
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    animation: contact-pulse 10s ease-in-out infinite;
  }

  @keyframes contact-float-1 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(-30px, 30px) scale(1.1);
    }
  }

  @keyframes contact-float-2 {
    0%,
    100% {
      transform: translate(0, 0);
    }
    50% {
      transform: translate(20px, -20px);
    }
  }

  @keyframes contact-rotate {
    from {
      transform: rotate(45deg);
    }
    to {
      transform: rotate(405deg);
    }
  }

  @keyframes contact-pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.08;
    }
    50% {
      transform: scale(1.2);
      opacity: 0.12;
    }
  }

  /* Responsive Shapes */
  @media (max-width: 767px) {
    .contact-shape-1 {
      width: 150px;
      height: 150px;
      top: -50px;
      right: -40px;
    }

    .contact-shape-2 {
      width: 80px;
      height: 80px;
    }

    .contact-shape-3,
    .contact-shape-4 {
      display: none;
    }
  }

  /* ================================
     REDUCED MOTION
     ================================ */
  @media (prefers-reduced-motion: reduce) {
    .contact-form-card,
    .contact-details-card,
    .contact-submit-btn,
    .contact-social-icon,
    .contact-shape {
      transition: none !important;
      animation: none !important;
    }

    .contact-submit-btn::before {
      display: none;
    }
  }
</style>

{% schema %}
{
  "name": "t:sections.contact_form.name",
  "tag": "section",
  "class": "section-contact-form",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_content"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "t:sections.contact_form.settings.show_heading.label",
      "default": true
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.contact_form.settings.heading.label",
      "default": "تواصل معنا"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "t:sections.contact_form.settings.subheading.label",
      "default": "نسعد بتواصلك معنا! فريقنا جاهز للإجابة على جميع استفساراتك"
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "t:sections.contact_form.settings.layout.label",
      "default": "form-right",
      "options": [
        {
          "value": "form-right",
          "label": "t:sections.contact_form.settings.layout.options.form_right"
        },
        {
          "value": "form-left",
          "label": "t:sections.contact_form.settings.layout.options.form_left"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_colors"
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_shapes"
    },
    {
      "type": "checkbox",
      "id": "show_shapes",
      "label": "t:sections.contact_form.settings.show_shapes.label",
      "default": true,
      "info": "t:sections.contact_form.settings.show_shapes.info"
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_card"
    },
    {
      "type": "range",
      "id": "card_radius",
      "label": "t:sections.contact_form.settings.card_radius.label",
      "default": 16,
      "min": 0,
      "max": 32,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.all.padding.padding_top",
      "default": 60,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 60,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "contact_form",
      "name": "t:sections.contact_form.blocks.contact_form.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "form_heading",
          "label": "t:sections.contact_form.blocks.contact_form.settings.form_heading.label",
          "default": "أرسل لنا رسالة"
        },
        {
          "type": "header",
          "content": "t:sections.contact_form.blocks.contact_form.settings.header_button"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "t:sections.contact_form.blocks.contact_form.settings.button_text.label",
          "default": "إرسال الرسالة"
        },
        {
          "type": "text",
          "id": "success_message",
          "label": "t:sections.contact_form.blocks.contact_form.settings.success_message.label",
          "default": "شكراً لتواصلك معنا! سنرد عليك في أقرب وقت."
        }
      ]
    },
    {
      "type": "contact_details",
      "name": "t:sections.contact_form.blocks.contact_details.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "details_heading",
          "label": "t:sections.contact_form.blocks.contact_details.settings.details_heading.label",
          "default": "معلومات التواصل"
        },
        {
          "type": "header",
          "content": "t:sections.contact_form.blocks.contact_details.settings.header_contact_info"
        },
        {
          "type": "text",
          "id": "email",
          "label": "t:sections.contact_form.blocks.contact_details.settings.email.label",
          "default": "support@example.com"
        },
        {
          "type": "text",
          "id": "phone",
          "label": "t:sections.contact_form.blocks.contact_details.settings.phone.label",
          "default": "+966 50 123 4567"
        },
        {
          "type": "text",
          "id": "whatsapp",
          "label": "t:sections.contact_form.blocks.contact_details.settings.whatsapp.label",
          "info": "t:sections.contact_form.blocks.contact_details.settings.whatsapp.info",
          "default": "+966501234567"
        },
        {
          "type": "text",
          "id": "address",
          "label": "t:sections.contact_form.blocks.contact_details.settings.address.label",
          "default": "المملكة العربية السعودية، الرياض"
        },
        {
          "type": "richtext",
          "id": "working_hours",
          "label": "t:sections.contact_form.blocks.contact_details.settings.working_hours.label",
          "default": "<p><strong>السبت - الخميس:</strong> 9:00 ص - 9:00 م</p><p><strong>الجمعة:</strong> 2:00 م - 9:00 م</p>"
        },
        {
          "type": "header",
          "content": "t:sections.contact_form.blocks.contact_details.settings.header_social"
        },
        {
          "type": "checkbox",
          "id": "show_social_icons",
          "label": "t:sections.contact_form.blocks.contact_details.settings.show_social_icons.label",
          "default": true,
          "info": "t:sections.contact_form.blocks.contact_details.settings.show_social_icons.info"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.contact_form.name",
      "blocks": [
        {
          "type": "contact_form",
          "settings": {
            "form_heading": "أرسل لنا رسالة",
            "button_text": "إرسال الرسالة",
            "success_message": "شكراً لتواصلك معنا! سنرد عليك في أقرب وقت."
          }
        },
        {
          "type": "contact_details",
          "settings": {
            "details_heading": "معلومات التواصل",
            "email": "support@example.com",
            "phone": "+966 50 123 4567",
            "whatsapp": "+966501234567",
            "address": "المملكة العربية السعودية، الرياض",
            "working_hours": "<p><strong>السبت - الخميس:</strong> 9:00 ص - 9:00 م</p><p><strong>الجمعة:</strong> 2:00 م - 9:00 م</p>",
            "show_social_icons": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
