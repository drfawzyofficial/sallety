{%- comment -%}
  Banner Image Section - بانر صورة
  Single image banner with optional overlay and text
  RTL layout with Arabic labels - Following Sallety Theme Patterns
{%- endcomment -%}

{%- liquid
  # Color scheme class (uses CSS classes from theme.liquid)
  assign scheme_number = section.settings.color_scheme.id | remove: 'scheme-'
  
  # Typography - Responsive sizes
  assign heading_size_desktop = section.settings.heading_size_desktop | default: 42
  assign heading_size_tablet = section.settings.heading_size_tablet | default: 32
  assign heading_size_mobile = section.settings.heading_size_mobile | default: 26
  assign subheading_size_desktop = section.settings.subheading_size_desktop | default: 18
  assign subheading_size_tablet = section.settings.subheading_size_tablet | default: 16
  assign subheading_size_mobile = section.settings.subheading_size_mobile | default: 14
  
  # Typography - Weights
  assign heading_weight = section.settings.heading_weight | default: '700'
  assign subheading_weight = section.settings.subheading_weight | default: '400'
  
  # Section settings
  assign image = section.settings.image
  assign image_height = section.settings.image_height | default: 500
  assign heading = section.settings.heading
  assign subheading = section.settings.subheading
  assign link = section.settings.link
  assign overlay_opacity = section.settings.overlay_opacity | default: 40
  assign text_position = section.settings.text_position | default: 'center'
  assign text_color_override = section.settings.text_color | default: '#ffffff'
  assign full_width = section.settings.full_width
  assign show_shapes = section.settings.show_shapes
  assign padding_top = section.settings.padding_top | default: 40
  assign padding_bottom = section.settings.padding_bottom | default: 40
  
  # Calculate overlay
  assign overlay_decimal = overlay_opacity | divided_by: 100.0
-%}

{%- capture section_dir -%}{%- render 'section-dir' -%}{%- endcapture -%}
<section 
  class="banner-image-section color-scheme-{{ scheme_number }} relative overflow-hidden" 
  dir="{{ section_dir }}" 
  style="
    --banner-text: {{ text_color_override }};
    --banner-overlay: {{ overlay_decimal }};
    --banner-height: {{ image_height }}px;
    --banner-heading-desktop: {{ heading_size_desktop }}px;
    --banner-heading-tablet: {{ heading_size_tablet }}px;
    --banner-heading-mobile: {{ heading_size_mobile }}px;
    --banner-subheading-desktop: {{ subheading_size_desktop }}px;
    --banner-subheading-tablet: {{ subheading_size_tablet }}px;
    --banner-subheading-mobile: {{ subheading_size_mobile }}px;
    --banner-heading-weight: {{ heading_weight }};
    --banner-subheading-weight: {{ subheading_weight }};
    font-family: var(--font-body-family);
    {%- unless full_width -%}
    padding-top: {{ padding_top }}px;
    padding-bottom: {{ padding_bottom }}px;
    {%- endunless -%}
  "
>
  <!-- Decorative Parallax Shapes -->
  {%- if show_shapes -%}
    {% render 'decorative-shapes', accent_color: accent_color, text_color: text_color, prefix: 'banner' %}
  {%- endif -%}

  <div class="{% unless full_width %}max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-16{% endunless %} relative z-10">
    <div class="banner-container relative {% unless full_width %}rounded-2xl{% endunless %} overflow-hidden animate-on-scroll aos-fade-up">
      {%- if link != blank -%}
        <a href="{{ link }}" class="banner-link block">
      {%- endif -%}

        <div class="banner-wrapper" style="height: var(--banner-height);">
          {%- if image != blank -%}
            <img 
              src="{{ image | image_url: width: 1920 }}"
              srcset="
                {{ image | image_url: width: 640 }} 640w,
                {{ image | image_url: width: 1024 }} 1024w,
                {{ image | image_url: width: 1440 }} 1440w,
                {{ image | image_url: width: 1920 }} 1920w
              "
              sizes="100vw"
              alt="{{ image.alt | default: heading | default: 'Banner image' }}"
              class="banner-image w-full h-full object-cover"
              loading="lazy"
              width="{{ image.width }}"
              height="{{ image.height }}"
            >
          {%- else -%}
            <div class="banner-placeholder w-full h-full flex items-center justify-center" style="background-color: #f3f4f6; min-height: 300px;">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
          {%- endif -%}

          <!-- Overlay -->
          {%- if overlay_opacity > 0 -%}
            <div class="banner-overlay absolute inset-0" style="background: rgba(0, 0, 0, var(--banner-overlay));"></div>
          {%- endif -%}

          <!-- Text Content -->
          {%- if heading != blank or subheading != blank -%}
            <div class="banner-content absolute inset-0 flex items-{{ text_position | split: '-' | first | default: 'center' }} justify-{{ text_position | split: '-' | last | default: 'center' }} p-6 sm:p-8 lg:p-12">
              <div class="banner-text-wrapper text-{{ text_position | split: '-' | last | default: 'center' }} max-w-2xl">
                {%- if heading != blank -%}
                  <h2 class="banner-heading m-0 mb-3 leading-tight" style="color: var(--banner-text); font-weight: var(--banner-heading-weight);">
                    {{ heading }}
                  </h2>
                {%- endif -%}
                {%- if subheading != blank -%}
                  <p class="banner-subheading m-0 leading-relaxed" style="color: var(--banner-text); font-weight: var(--banner-subheading-weight); opacity: 0.9;">
                    {{ subheading }}
                  </p>
                {%- endif -%}
              </div>
            </div>
          {%- endif -%}
        </div>

      {%- if link != blank -%}
        </a>
      {%- endif -%}
    </div>
  </div>
</section>

<style>
  /* Banner Image Section Styles */
  .banner-image-section {
    position: relative;
  }

  .banner-container {
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  }

  .banner-link {
    text-decoration: none;
    display: block;
    transition: transform 0.3s ease;
  }

  .banner-link:hover {
    transform: scale(1.005);
  }

  .banner-wrapper {
    position: relative;
    overflow: hidden;
  }

  .banner-image {
    transition: transform 0.6s ease;
  }

  .banner-link:hover .banner-image {
    transform: scale(1.05);
  }

  /* Typography - Responsive */
  .banner-heading {
    font-size: var(--banner-heading-desktop);
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
  }

  .banner-subheading {
    font-size: var(--banner-subheading-desktop);
    text-shadow: 0 1px 10px rgba(0, 0, 0, 0.3);
  }

  @media (max-width: 1023px) {
    .banner-heading {
      font-size: var(--banner-heading-tablet);
    }
    .banner-subheading {
      font-size: var(--banner-subheading-tablet);
    }
    .banner-wrapper {
      height: calc(var(--banner-height) * 0.8) !important;
    }
  }

  @media (max-width: 767px) {
    .banner-heading {
      font-size: var(--banner-heading-mobile);
    }
    .banner-subheading {
      font-size: var(--banner-subheading-mobile);
    }
    .banner-wrapper {
      height: calc(var(--banner-height) * 0.6) !important;
      min-height: 300px;
    }
  }

  /* Text Position Classes */
  .items-center { align-items: center; }
  .items-end { align-items: flex-end; }
  .items-start { align-items: flex-start; }
  .justify-center { justify-content: center; }
  .justify-start { justify-content: flex-start; }
  .justify-end { justify-content: flex-end; }
  .text-center { text-align: center; }
  .text-right { text-align: right; }
  .text-left { text-align: left; }

  /* RTL Adjustments */
  [dir="rtl"] .justify-start { justify-content: flex-end; }
  [dir="rtl"] .justify-end { justify-content: flex-start; }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .banner-link:hover {
      transform: none;
    }
    .banner-image {
      transition: none;
    }
  }
</style>

{% schema %}
{
  "name": "t:sections.banner_image.name",
  "tag": "section",
  "class": "section-banner-image",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.banner_image.settings.color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.banner_image.settings.image.label",
      "info": "t:sections.banner_image.settings.image.info"
    },
    {
      "type": "range",
      "id": "image_height",
      "label": "t:sections.banner_image.settings.image_height.label",
      "default": 500,
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "px"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "t:sections.banner_image.settings.full_width.label",
      "default": false,
      "info": "t:sections.banner_image.settings.full_width.info"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.banner_image.settings.heading.label",
      "default": "عنوان البانر"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "t:sections.banner_image.settings.subheading.label",
      "default": "وصف قصير للبانر يظهر تحت العنوان"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:sections.banner_image.settings.text_color.label",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "text_position",
      "label": "t:sections.banner_image.settings.text_position.label",
      "default": "center-center",
      "options": [
        {
          "value": "start-start",
          "label": "t:sections.banner_image.settings.text_position.options.start-start"
        },
        {
          "value": "start-center",
          "label": "t:sections.banner_image.settings.text_position.options.start-center"
        },
        {
          "value": "start-end",
          "label": "t:sections.banner_image.settings.text_position.options.start-end"
        },
        {
          "value": "center-start",
          "label": "t:sections.banner_image.settings.text_position.options.center-start"
        },
        {
          "value": "center-center",
          "label": "t:sections.banner_image.settings.text_position.options.center-center"
        },
        {
          "value": "center-end",
          "label": "t:sections.banner_image.settings.text_position.options.center-end"
        },
        {
          "value": "end-start",
          "label": "t:sections.banner_image.settings.text_position.options.end-start"
        },
        {
          "value": "end-center",
          "label": "t:sections.banner_image.settings.text_position.options.end-center"
        },
        {
          "value": "end-end",
          "label": "t:sections.banner_image.settings.text_position.options.end-end"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "url",
      "id": "link",
      "label": "t:sections.banner_image.settings.link.label",
      "info": "t:sections.banner_image.settings.link.info"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "t:sections.banner_image.settings.overlay_opacity.label",
      "default": 40,
      "min": 0,
      "max": 90,
      "step": 5,
      "unit": "%"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "checkbox",
      "id": "show_shapes",
      "label": "t:sections.banner_image.settings.show_shapes.label",
      "default": false,
      "info": "t:sections.banner_image.settings.show_shapes.info"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "range",
      "id": "heading_size_desktop",
      "label": "t:sections.banner_image.settings.heading_size_desktop.label",
      "default": 42,
      "min": 28,
      "max": 64,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "subheading_size_desktop",
      "label": "t:sections.banner_image.settings.subheading_size_desktop.label",
      "default": 18,
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "range",
      "id": "heading_size_tablet",
      "label": "t:sections.banner_image.settings.heading_size_tablet.label",
      "default": 32,
      "min": 24,
      "max": 48,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "subheading_size_tablet",
      "label": "t:sections.banner_image.settings.subheading_size_tablet.label",
      "default": 16,
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "label": "t:sections.banner_image.settings.heading_size_mobile.label",
      "default": 26,
      "min": 20,
      "max": 36,
      "step": 2,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "subheading_size_mobile",
      "label": "t:sections.banner_image.settings.subheading_size_mobile.label",
      "default": 14,
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "select",
      "id": "heading_weight",
      "label": "t:sections.banner_image.settings.heading_weight.label",
      "default": "700",
      "options": [
        {
          "value": "400",
          "label": "t:sections.banner_image.settings.heading_weight.options.400"
        },
        {
          "value": "500",
          "label": "t:sections.banner_image.settings.heading_weight.options.500"
        },
        {
          "value": "600",
          "label": "t:sections.banner_image.settings.heading_weight.options.600"
        },
        {
          "value": "700",
          "label": "t:sections.banner_image.settings.heading_weight.options.700"
        },
        {
          "value": "800",
          "label": "t:sections.banner_image.settings.heading_weight.options.800"
        }
      ]
    },
    {
      "type": "select",
      "id": "subheading_weight",
      "label": "t:sections.banner_image.settings.subheading_weight.label",
      "default": "400",
      "options": [
        {
          "value": "400",
          "label": "t:sections.banner_image.settings.subheading_weight.options.400"
        },
        {
          "value": "500",
          "label": "t:sections.banner_image.settings.subheading_weight.options.500"
        },
        {
          "value": "600",
          "label": "t:sections.banner_image.settings.subheading_weight.options.600"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:sections.banner_image.settings.header.content"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.banner_image.settings.padding_top.label",
      "default": 40,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "info": "t:sections.banner_image.settings.padding_top.info"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.banner_image.settings.padding_bottom.label",
      "default": 40,
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "info": "t:sections.banner_image.settings.padding_bottom.info"
    }
  ],
  "presets": [
    {
      "name": "t:sections.banner_image.name"
    }
  ]
}
{% endschema %}

